<!DOCTYPE html>
<html>
<head>
    <title>Console Test</title>
</head>
<body>
    <h1>Open Browser Console (F12)</h1>
    <p>This will test if JavaScript loads properly</p>
    
    <select id="electoralSystem">
        <option value="">-- Select --</option>
        <option value="fptp">FPTP</option>
    </select>
    
    <div id="partiesSection" style="display: none; border: 2px solid red; padding: 20px; margin: 20px;">
        <h2>PARTIES SECTION</h2>
    </div>
    
    <div id="candidatesSection" style="display: none;">Candidates</div>
    <div id="votingSection" style="display: none;">Voting</div>
    <div id="systemDescription"></div>
    <div id="electoralThresholdContainer" style="display: none;">Threshold</div>
    <div id="allocationMethodContainer" style="display: none;">Allocation</div>
    
    <script>
        // Copy the EXACT initialization from app.js
        const systemDescriptions = {
            fptp: "FPTP Description"
        };
        
        document.addEventListener('DOMContentLoaded', function() {
            console.log('âœ… DOMContentLoaded fired');
            console.log('âœ… Attaching event listener to select');
            
            const select = document.getElementById('electoralSystem');
            console.log('âœ… Select element found:', select);
            
            select.addEventListener('change', onSystemChange);
            console.log('âœ… Event listener attached');
            
            // Call immediately to test
            onSystemChange();
            console.log('âœ… Initial onSystemChange called');
        });
        
        function onSystemChange() {
            console.log('ðŸ”µ onSystemChange START');
            const system = document.getElementById('electoralSystem').value;
            console.log('System value:', system);
            
            if (!system) {
                console.log('No system selected - hiding all');
                document.getElementById('partiesSection').style.display = 'none';
                document.getElementById('candidatesSection').style.display = 'none';
                document.getElementById('votingSection').style.display = 'none';
                return;
            }
            
            console.log('System selected:', system);
            console.log('Setting description...');
            document.getElementById('systemDescription').innerHTML = '<p>' + systemDescriptions[system] + '</p>';
            
            const candidateFocused = ['fptp'];
            
            console.log('Getting section elements...');
            const partiesSection = document.getElementById('partiesSection');
            const candidatesSection = document.getElementById('candidatesSection');
            const votingSection = document.getElementById('votingSection');
            
            console.log('Sections found:', {
                parties: !!partiesSection,
                candidates: !!candidatesSection,
                voting: !!votingSection
            });
            
            if (candidateFocused.includes(system)) {
                console.log('âœ… Setting display to block');
                partiesSection.style.display = 'block';
                candidatesSection.style.display = 'block';
                votingSection.style.display = 'block';
                console.log('âœ… Styles set');
            }
            
            console.log('ðŸ”µ onSystemChange END');
        }
    </script>
</body>
</html>
