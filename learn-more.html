<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learn More About Electoral Systems</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            line-height: 1.6;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 40px;
        }

        h1 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 2.5em;
            text-align: center;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .video-section {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 40px;
            border-left: 4px solid #667eea;
        }

        .video-section h2 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .video-link {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 12px 24px;
            text-decoration: none;
            border-radius: 8px;
            margin: 10px 10px 10px 0;
            transition: all 0.3s ease;
        }

        .video-link:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .table-section {
            margin-top: 40px;
        }

        .table-section h2 {
            color: #667eea;
            margin-bottom: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }

        thead {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        th, td {
            padding: 16px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }

        th {
            font-weight: 600;
            font-size: 0.95em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        tbody tr:hover {
            background: #f8f9fa;
        }

        tbody tr:last-child td {
            border-bottom: none;
        }

        .system-number {
            display: inline-block;
            background: #667eea;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            font-weight: bold;
            margin-right: 8px;
        }

        .ai-section {
            margin-top: 50px;
            padding: 30px;
            background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
            border-radius: 12px;
            border: 2px solid #667eea;
        }

        .ai-section h2 {
            color: #667eea;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ai-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1em;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 20px auto;
        }

        .ai-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .ai-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .ai-response {
            background: white;
            padding: 25px;
            border-radius: 8px;
            margin-top: 20px;
            display: none;
            border-left: 4px solid #667eea;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .ai-response.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .back-button {
            display: inline-block;
            background: #6c757d;
            color: white;
            padding: 12px 24px;
            text-decoration: none;
            border-radius: 8px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .info-box {
            background: #e8f5e9;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #4caf50;
        }

        .warning-box {
            background: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border-left: 4px solid #ffc107;
            font-size: 0.9em;
            color: #856404;
        }

        /* Navigation Sidebar Styles */
        .content-with-nav {
            display: flex;
            gap: 30px;
            position: relative;
        }

        .main-article {
            flex: 1;
            min-width: 0; /* Allow flex item to shrink */
        }

        .table-of-contents {
            position: sticky;
            top: 20px;
            width: 250px;
            height: fit-content;
            max-height: calc(100vh - 40px);
            overflow-y: auto;
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            order: 2; /* Position on right side */
        }

        .table-of-contents h3 {
            color: #667eea;
            font-size: 1.1em;
            margin-bottom: 15px;
        }

        .table-of-contents ul {
            list-style: none;
            padding: 0;
        }

        .table-of-contents li {
            margin-bottom: 8px;
        }

        .table-of-contents a {
            color: #333;
            text-decoration: none;
            font-size: 0.9em;
            line-height: 1.5;
            display: block;
            padding: 4px 8px;
            border-radius: 4px;
            transition: all 0.2s;
        }

        .table-of-contents a:hover {
            background: #f0f4ff;
            color: #667eea;
            transform: translateX(4px);
        }

        /* Responsive: Hide sidebar on small screens */
        @media (max-width: 1024px) {
            .table-of-contents {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-button">‚Üê Back to Simulator</a>
        
        <h1>üó≥Ô∏è Learn More About Electoral Systems</h1>
        <p class="subtitle">Explore how different voting systems work around the world</p>

        <div class="content-with-nav">
            <main class="main-article">
                <div class="video-section" id="video-series">
            <h2>üì∫ Excellent Video Series by CGP Grey</h2>
            <p style="margin-bottom: 15px;">Watch this comprehensive series explaining electoral systems with clear animations and real-world examples:</p>
            
            <a href="https://www.cgpgrey.com/politics-in-the-animal-kingdom" target="_blank" class="video-link">
                üé¨ Politics in the Animal Kingdom - Full Series
            </a>
            
            <div style="margin-top: 20px;">
                <strong>Series includes:</strong>
                <ul style="margin-left: 20px; margin-top: 10px; line-height: 1.8;">
                    <li>The Problems with First Past the Post Voting</li>
                    <li>The Alternative Vote (IRV/RCV)</li>
                    <li>Gerrymandering Explained</li>
                    <li>Mixed-Member Proportional Representation</li>
                    <li>Single Transferable Vote</li>
                </ul>
            </div>
        </div>

        <div class="info-box">
            <strong>üí° Did you know?</strong> The same votes can produce vastly different outcomes depending on which electoral system is used. This simulator lets you explore these differences hands-on!
        </div>

        <div class="table-section" id="systems-table">
            <h2>üåç Electoral Systems Around the World</h2>
            <p style="margin-bottom: 20px;">Here's where these systems are actually used in real elections:</p>
            
            <table>
                <thead>
                    <tr>
                        <th>System Name</th>
                        <th>Type of Race/Location</th>
                        <th>Examples</th>
                        <th>How It Works (Technical)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span class="system-number">1</span><strong>First-Past-the-Post (FPTP)</strong></td>
                        <td>Single-winner majoritarian for legislative and executive bodies</td>
                        <td>United Kingdom, United States (House seats), Canada, India, Pakistan, Bangladesh</td>
                        <td>
                            <strong>Calculation:</strong> Count votes for each candidate. Candidate with most votes wins.<br>
                            <strong>Formula:</strong> Winner = max(votes<sub>i</sub>) for all candidates i<br>
                            <strong>Threshold:</strong> None required. Simple plurality.
                        </td>
                    </tr>
                    <tr>
                        <td><span class="system-number">2</span><strong>Instant-Runoff Voting (IRV/RCV)</strong></td>
                        <td>Single-winner ranked voting system</td>
                        <td>Australian House of Representatives, Papua New Guinea Parliament, Irish Presidential election. US Cities: San Francisco, Portland ME, St. Paul MN, Alaska (state elections)</td>
                        <td>
                            <strong>Calculation:</strong> Multi-round elimination process:<br>
                            1. Count first-preference votes<br>
                            2. If no majority (&gt;50%), eliminate candidate with fewest votes<br>
                            3. Transfer eliminated candidate's votes to next preferences<br>
                            4. Repeat until one candidate has majority<br>
                            <strong>Quota:</strong> floor(totalVotes / 2) + 1
                        </td>
                    </tr>
                    <tr>
                        <td><span class="system-number">3</span><strong>Party-List Proportional Representation</strong></td>
                        <td>Multi-winner proportional representation</td>
                        <td><strong>Closed:</strong> Israel, Spain, Portugal, South Africa<br><strong>Open:</strong> Finland, Latvia, Sweden, Netherlands, Brazil</td>
                        <td>
                            <strong>Calculation:</strong> D'Hondt or Sainte-Lagu√´ method<br>
                            <strong>D'Hondt:</strong> quotient = votes / (seats_won + 1)<br>
                            <strong>Sainte-Lagu√´:</strong> quotient = votes / (2 √ó seats_won + 1)<br>
                            Award seats iteratively to party with highest quotient.<br>
                            <strong>Threshold:</strong> Parties must exceed threshold % to win seats (typically 3-5%)
                            <p style="margin-top: 10px; padding: 10px; background: #fff3cd; border-radius: 4px; border-left: 3px solid #ffc107;">
                                <strong>üìù Netherlands Allocation Method:</strong> The Netherlands does not use D'Hondt exclusively. 
                                It uses the Hare Quota for primary allocation, with D'Hondt only for assigned remaining seats. 
                                In a simulator using D'Hondt exclusively, this will slightly over-represent the largest parties 
                                (PVV or VVD) and under-represent smaller parties (like BBB or PvdD).
                            </p>
                            <p style="margin-top: 10px; padding: 10px; background: #e8f5e9; border-radius: 4px; border-left: 3px solid #4caf50;">
                                <strong>üìù Sweden's Unique System:</strong> Sweden has 310 fixed constituency seats and 39 "leveling seats" 
                                to ensure national proportionality. Since this simulator uses a flat party-list system, the result will be 
                                roughly 99% accurate, but in reality, a party must hit 4% nationally or 12% in a single constituency to enter.
                            </p>
                        </td>
                    </tr>
                    <tr>
                        <td><span class="system-number">4</span><strong>Single Transferable Vote (STV)</strong></td>
                        <td>Multi-winner proportional representation</td>
                        <td>Republic of Ireland (parliament), Malta, Australian Senate. Regional: Northern Ireland, Scotland (local elections)</td>
                        <td>
                            <strong>Calculation:</strong> Multi-winner ranked choice with quota<br>
                            <strong>Droop Quota:</strong> floor(totalVotes / (seats + 1)) + 1<br>
                            1. Count first preferences<br>
                            2. Elect candidates meeting quota<br>
                            3. <strong>Gregory Method Transfer:</strong> Surplus votes are redistributed using a fractional transfer value (Surplus / Total Votes) to ensure every ballot is treated equally<br>
                            4. If no one meets quota, eliminate lowest and transfer votes<br>
                            5. Repeat until all seats filled
                            <p style="margin-top: 10px; padding: 10px; background: #e8f5e9; border-radius: 4px;">
                                <strong>üî¨ Research-Grade Implementation:</strong> Our simulator uses the Gregory Method 
                                for surplus transfer, matching the procedures used in Irish D√°il elections and the 
                                Australian Senate. <strong>Deterministic Results:</strong> Unlike simulators that randomly 
                                select ballots for transfer, the Gregory Method ensures the same input always produces 
                                the same output‚Äîcritical for research validity.
                            </p>
                            <p style="margin-top: 10px; padding: 10px; background: #fff3cd; border-radius: 4px; border-left: 3px solid #ffc107;">
                                <strong>üìù Note on Our Implementation:</strong> The STV system in this simulator is implemented as a 
                                <strong>"Party-Block STV"</strong> or <strong>"Open-List STV"</strong> hybrid rather than pure candidate-based STV. 
                                Users rank parties instead of individual candidates, and the system automatically generates candidates 
                                as parties are elected based on their vote share. This approach reflects how many people perceive voting: 
                                they want their party to get the right number of seats, and they want the best candidates in those seats. 
                                In real-world elections, parties typically field multiple candidates anyway, so this hybrid model captures 
                                the essential proportional transfer mechanism while simplifying the ballot input process.
                            </p>
                        </td>
                    </tr>
                    <tr>
                        <td><span class="system-number">5</span><strong>Mixed-Member Proportional (MMP/AMS)</strong></td>
                        <td>Mixed system with compensatory list seats for overall proportionality</td>
                        <td>Germany (originator), New Zealand, Scottish Parliament, Welsh Assemblies</td>
                        <td>
                            <strong>Calculation:</strong> Compensatory mixed system<br>
                            <strong>Step A:</strong> Simulate district winners (FPTP in virtual districts)<br>
                            <strong>Step B:</strong> Calculate proportional targets using D'Hondt/Sainte-Lagu√´<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;Target = allocateSeats(partyVotes, totalSeats)<br>
                            <strong>Step C:</strong> Award list seats to compensate<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;ListSeats = max(0, Target ‚àí DistrictSeats)<br>
                            <strong>Step D:</strong> Handle overhang (party keeps excess district seats, parliament expands)
                            <p style="margin-top: 10px; padding: 10px; background: #fff3e0; border-radius: 4px;">
                                <strong>üìã Threshold Rule (Double Gate):</strong> Parties typically must reach 5% of 
                                the national vote <strong>OR</strong> win at least one local district seat to qualify 
                                for list seats. This prevents regional parties with strong local support from being 
                                excluded. <strong>Real-World Use:</strong> Germany and New Zealand are the primary 
                                practitioners of this rule, which balances proportionality with protection for 
                                regionally-concentrated parties (e.g., Bavaria's CSU in Germany).
                            </p>
                        </td>
                    </tr>
                    <tr>
                        <td><span class="system-number">6</span><strong>Parallel Voting (MMM)</strong></td>
                        <td>Mixed system where district and list seats are calculated independently</td>
                        <td>Japan, Russia, Taiwan, Lithuania, Thailand</td>
                        <td>
                            <strong>Calculation:</strong> Non-compensatory two-tier system<br>
                            <strong>SILO 1 (Districts):</strong> Simulate FPTP winners across districts<br>
                            <strong>SILO 2 (Lists):</strong> Allocate list seats by party vote (D'Hondt/Sainte-Lagu√´)<br>
                            <strong>Final:</strong> DistrictSeats + ListSeats (simple addition, no compensation)<br>
                            <strong>Note:</strong> District performance does NOT affect list seat allocation
                            <p style="margin-top: 10px; padding: 10px; background: #fff3cd; border-radius: 4px; border-left: 3px solid #ffc107;">
                                <strong>üìù Taiwan Indigenous Seats:</strong> Taiwan reserves 6 seats (in 2020) and 19 seats (in 2024) for indigenous candidates, elected by Single Non-Transferable Vote (SNTV). In this calculator, these indigenous seats are treated as party-list seats for modeling purposes, as they are allocated separately from the general district seats.
                            </p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Measuring Fairness Section -->
        <div class="table-section" id="measuring-fairness">
            <h2>üìä How We Measure Fairness</h2>
            <p>Electoral scientists use specific indices to calculate how "fair" an election was. In our simulator, we provide two key metrics:</p>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 15px;">
                <div class="info-box" style="background: #f1f8ff; border-left: 4px solid #0366d6; padding: 15px; border-radius: 8px;">
                    <strong style="color: #0366d6; font-size: 1.1em;">1. Loosemore-Hanby Index</strong>
                    <p style="font-size: 0.95em; margin-top: 8px; line-height: 1.6;">
                        A simple measure of the total difference between vote shares and seat shares. 
                        It tells you what percentage of seats were "misallocated" according to the 
                        popular vote.
                    </p>
                    <p style="font-size: 0.85em; margin-top: 8px; color: #666; font-family: 'Courier New', monospace;">
                        <strong>Formula:</strong> LH = (1/2) √ó Œ£|Vote% - Seat%|
                    </p>
                </div>
                <div class="info-box" style="background: #fdf2f2; border-left: 4px solid #d73a49; padding: 15px; border-radius: 8px;">
                    <strong style="color: #d73a49; font-size: 1.1em;">2. Gallagher Index (Least Squares)</strong>
                    <p style="font-size: 0.95em; margin-top: 8px; line-height: 1.6;">
                        The academic gold standard. By squaring the differences, it penalizes large 
                        discrepancies more heavily. A score under 5 is considered excellent; over 15 
                        is highly disproportional.
                    </p>
                    <p style="font-size: 0.85em; margin-top: 8px; color: #666; font-family: 'Courier New', monospace;">
                        <strong>Formula:</strong> G = ‚àö((1/2) √ó Œ£(Vote% - Seat%)¬≤)
                    </p>
                </div>
            </div>
            
            <div style="margin-top: 20px; padding: 15px; background: #f0f4ff; border-radius: 8px;">
                <strong>üìà Interpretation Guide:</strong>
                <ul style="margin-top: 10px; line-height: 1.8;">
                    <li><strong style="color: #2ecc71;">0-5%:</strong> Highly Proportional (Excellent) üü¢</li>
                    <li><strong style="color: #f39c12;">5-15%:</strong> Moderately Disproportional (Fair) üü†</li>
                    <li><strong style="color: #e74c3c;">15%+:</strong> Highly Disproportional (Poor) üî¥</li>
                </ul>
            </div>
        </div>

        <!-- Foundations of Comparative Politics Section -->
        <div class="table-section" id="foundations" style="margin-top: 40px;">
            <h2>üèõÔ∏è The Foundations of Comparative Politics</h2>
            <p style="line-height: 1.6;">To understand why countries choose different systems, political scientists look at two major frameworks:</p>
            
            <h3 style="margin-top: 25px; color: #667eea;">Duverger's Law</h3>
            <p style="line-height: 1.6;">Named after French sociologist Maurice Duverger, this principle suggests a strong correlation between a country's voting system and its party structure:</p>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                <div class="info-box" style="background: #f1f8ff; border-left: 4px solid #0366d6; padding: 20px; border-radius: 4px;">
                    <h4 style="margin-top: 0; color: #0366d6;">Plurality Systems (FPTP)</h4>
                    <p style="margin: 10px 0 0 0; line-height: 1.6;">
                        Tend to produce <strong>Two-Party Systems</strong>. Because voters fear "wasting" their vote on a third party, 
                        they gravitate toward two big-tent parties.
                    </p>
                </div>
                <div class="info-box" style="background: #f0f9ff; border-left: 4px solid #06b6d4; padding: 20px; border-radius: 4px;">
                    <h4 style="margin-top: 0; color: #06b6d4;">Proportional Systems (PR/STV/MMP)</h4>
                    <p style="margin: 10px 0 0 0; line-height: 1.6;">
                        Tend to produce <strong>Multi-Party Systems</strong>. Since even small percentages of votes grant representation, 
                        diverse parties can survive and thrive.
                    </p>
                </div>
            </div>
            
            <h3 style="margin-top: 30px; color: #667eea;">The Executive Trade-off: Stability vs. Representativeness</h3>
            <p style="line-height: 1.6;">In Comparative Politics, we analyze the trade-off between:</p>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                <div class="info-box" style="background: #fff5f5; border-left: 4px solid #ef4444; padding: 20px; border-radius: 4px;">
                    <h4 style="margin-top: 0; color: #dc2626;">Efficiency (Majoritarian)</h4>
                    <p style="margin: 10px 0 0 0; line-height: 1.6;">
                        Systems like FPTP often create <strong>"manufactured majorities,"</strong> where one party gets 100% of the power with 40% of the vote. 
                        This allows for fast lawmaking but ignores 60% of the voters.
                    </p>
                </div>
                <div class="info-box" style="background: #f0fdf4; border-left: 4px solid #22c55e; padding: 20px; border-radius: 4px;">
                    <h4 style="margin-top: 0; color: #16a34a;">Consensus (Proportional)</h4>
                    <p style="margin: 10px 0 0 0; line-height: 1.6;">
                        PR systems usually require <strong>Coalition Governments</strong>. Different parties must learn to work together to pass laws. 
                        This is more representative but can lead to slower decision-making or frequent "gridlock."
                    </p>
                </div>
            </div>
        </div>

        <!-- Arrow's Impossibility Theorem Section -->
        <div class="video-section" style="background: #fff8e1; border-left: 4px solid #ffa000; padding: 20px; margin: 30px 0; border-radius: 8px;">
            <h2 style="color: #f57c00; margin-top: 0;">‚öñÔ∏è Arrow's Impossibility Theorem</h2>
            <p style="line-height: 1.6; font-size: 1.05em;">
                In 1951, economist Kenneth Arrow proved mathematically that <strong>no voting system is perfect.</strong> 
                Any system that meets basic fairness criteria (like not having a dictator) will eventually produce
                a paradox, such as the winner changing just because a "spoiler" candidate joined the race.
            </p>
            <div class="warning-box" style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; margin-top: 15px; border-radius: 4px;">
                <p style="margin: 0; color: #856404;">
                    <strong>üí° In the Simulator:</strong> Look out for <strong>"Electoral Paradox"</strong> alerts in your election results! 
                    They highlight exactly where these mathematical impossibilities occur in real electoral systems.
                </p>
            </div>
        </div>

        <!-- Social Choice Theory & Paradoxes Section -->
        <div class="table-section" id="paradoxes" style="margin-top: 40px;">
            <h2>‚öñÔ∏è Social Choice Theory & Paradoxes</h2>
            <p style="line-height: 1.6;">
                Mathematics proves that no voting system is perfect. In 1951, Nobel laureate Kenneth Arrow introduced 
                <strong>Arrow's Impossibility Theorem</strong>, which states that when voters have three or more distinct options, 
                no ranked voting system can convert the ranked preferences of individuals into a community-wide ranking while 
                also meeting a specific set of "fairness" criteria.
            </p>
            
            <h3 style="margin-top: 25px; color: #667eea;">Look for these "Paradox Alerts" in the simulator:</h3>
            
            <div style="margin: 20px 0;">
                <div style="background: #fef3c7; border-left: 4px solid #f59e0b; padding: 15px; margin-bottom: 15px; border-radius: 4px;">
                    <h4 style="margin: 0 0 8px 0; color: #d97706;">üèÜ Condorcet Winner</h4>
                    <p style="margin: 0; line-height: 1.6; color: #92400e;">
                        A candidate who would beat every other candidate in a head-to-head matchup. Paradoxically, in systems like FPTP or IRV, 
                        the Condorcet winner sometimes loses!
                    </p>
                </div>
                
                <div style="background: #fee2e2; border-left: 4px solid #ef4444; padding: 15px; margin-bottom: 15px; border-radius: 4px;">
                    <h4 style="margin: 0 0 8px 0; color: #dc2626;">‚ö†Ô∏è The Spoiler Effect</h4>
                    <p style="margin: 0; line-height: 1.6; color: #991b1b;">
                        When a minor candidate pulls votes away from a major candidate with similar views, allowing a candidate with opposite views to win.
                    </p>
                </div>
                
                <div style="background: #e0e7ff; border-left: 4px solid #6366f1; padding: 15px; border-radius: 4px;">
                    <h4 style="margin: 0 0 8px 0; color: #4f46e5;">üîÑ Monotonicity Failure</h4>
                    <p style="margin: 0; line-height: 1.6; color: #3730a3;">
                        A rare paradox in IRV where giving a candidate a higher ranking can actually cause them to lose. In multi-winner STV, this is called the <strong>Referendum Paradox</strong> or <strong>No-Show Paradox</strong>, where voters can paradoxically help their preferred candidate by not voting at all.
                    </p>
                </div>
            </div>
        </div>

        <!-- Advanced Comparison: Regional Patterns Section -->
        <div class="table-section" id="regional-patterns" style="margin-top: 40px;">
            <h2>üåç Advanced Comparison: Regional Patterns</h2>
            <p style="line-height: 1.6;">
                If you look at a map of the world, electoral systems often follow historical and cultural lines:
            </p>
            
            <div style="margin: 25px 0;">
                <div style="background: #f9fafb; border: 2px solid #e5e7eb; padding: 20px; margin-bottom: 20px; border-radius: 8px;">
                    <h3 style="margin: 0 0 12px 0; color: #667eea;">üá¨üáß The "Westminster" Model</h3>
                    <p style="margin: 0; line-height: 1.6;">
                        Most former British colonies (USA, Canada, India) kept FPTP. These countries usually have high Gallagher Index scores 
                        (disproportional) but very stable single-party governments.
                    </p>
                </div>
                
                <div style="background: #f9fafb; border: 2px solid #e5e7eb; padding: 20px; margin-bottom: 20px; border-radius: 8px;">
                    <h3 style="margin: 0 0 12px 0; color: #667eea;">üá™üá∫ The European Model</h3>
                    <p style="margin: 0; line-height: 1.6;">
                        Most of mainland Europe moved to Party-List PR in the early 20th century to ensure that various ethnic, religious, 
                        and social groups were all represented in parliament.
                    </p>
                </div>
                
                <div style="background: #f9fafb; border: 2px solid #e5e7eb; padding: 20px; border-radius: 8px;">
                    <h3 style="margin: 0 0 12px 0; color: #667eea;">üåè The "Pacific" Innovation</h3>
                    <p style="margin: 0; line-height: 1.6;">
                        Countries like Australia, New Zealand, and Fiji have been "laboratories" for voting reform, adopting IRV, STV, and MMP 
                        to try and find a middle ground between local representation and national fairness.
                    </p>
                </div>
            </div>
        </div>

        <!-- Glossary of Key Terms Section -->
        <div class="table-section" id="glossary" style="margin-top: 40px; margin-bottom: 60px;">
            <h2>üìñ Glossary of Key Terms</h2>
            <p style="line-height: 1.6;">To navigate the simulator like an expert, keep these definitions in mind:</p>
            
            <div style="margin: 25px 0;">
                <dl style="line-height: 2;">
                    <dt style="font-weight: 700; color: #667eea; margin-top: 15px; font-size: 1.1em;">Wasted Votes</dt>
                    <dd style="margin: 5px 0 0 20px; line-height: 1.6;">
                        Any votes cast for a losing candidate, or votes cast for a winning candidate in excess of what they needed to win. 
                        PR systems aim to minimize these.
                    </dd>
                    
                    <dt style="font-weight: 700; color: #667eea; margin-top: 15px; font-size: 1.1em;">Coalition Government</dt>
                    <dd style="margin: 5px 0 0 20px; line-height: 1.6;">
                        When no single party has a majority (common in MMP and PR), two or more parties must join together to form a government.
                    </dd>
                    
                    <dt style="font-weight: 700; color: #667eea; margin-top: 15px; font-size: 1.1em;">Threshold</dt>
                    <dd style="margin: 5px 0 0 20px; line-height: 1.6;">
                        The minimum percentage of the vote (e.g., 5% in Germany, 4% in Sweden) a party needs to enter parliament. 
                        This is used to prevent tiny, extremist parties from gaining power.
                    </dd>
                    
                    <dt style="font-weight: 700; color: #667eea; margin-top: 15px; font-size: 1.1em;">Overhang Seats</dt>
                    <dd style="margin: 5px 0 0 20px; line-height: 1.6;">
                        Specific to MMP, these occur when a party wins more local district seats than they are entitled to based on their party vote. 
                        The parliament size "stretches" to accommodate them.
                    </dd>
                </dl>
            </div>
        </div>

    <!-- Quick Comparison Table -->
    <div class="table-section" id="quick-comparison">
        <h2>üîç Quick Comparison Table</h2>
        <p>Not sure which system to simulate? Here's a quick reference to help you choose:</p>
        
        <table style="width: 100%; margin-top: 20px; border-collapse: collapse;">
            <thead>
                <tr style="background: #667eea; color: white;">
                    <th style="padding: 12px; text-align: left;">System</th>
                    <th style="padding: 12px; text-align: left;">Primary Goal</th>
                    <th style="padding: 12px; text-align: left;">
                        Typical Gallagher Index 
                        <a href="#measuring-fairness" style="color: #fff; text-decoration: none;" title="Learn what this means">
                            <sup>‚ìò</sup>
                        </a>
                    </th>
                    <th style="padding: 12px; text-align: left;">Complexity</th>
                </tr>
            </thead>
            <tbody>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 12px; border: 1px solid #dee2e6;"><strong>FPTP</strong></td>
                    <td style="padding: 12px; border: 1px solid #dee2e6;">Stable Government</td>
                    <td style="padding: 12px; border: 1px solid #dee2e6;">15.0 - 25.0 üî¥ (High)</td>
                    <td style="padding: 12px; border: 1px solid #dee2e6;">Very Low</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid #dee2e6;"><strong>IRV</strong></td>
                    <td style="padding: 12px; border: 1px solid #dee2e6;">Majority Support</td>
                    <td style="padding: 12px; border: 1px solid #dee2e6;">10.0 - 18.0 üü† (Medium)</td>
                    <td style="padding: 12px; border: 1px solid #dee2e6;">Low</td>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 12px; border: 1px solid #dee2e6;"><strong>Party-List PR</strong></td>
                    <td style="padding: 12px; border: 1px solid #dee2e6;">Proportionality</td>
                    <td style="padding: 12px; border: 1px solid #dee2e6;">2.0 - 8.0 üü¢ (Low)</td>
                    <td style="padding: 12px; border: 1px solid #dee2e6;">Medium</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid #dee2e6;"><strong>STV</strong></td>
                    <td style="padding: 12px; border: 1px solid #dee2e6;">Proportionality + Choice</td>
                    <td style="padding: 12px; border: 1px solid #dee2e6;">1.0 - 5.0 üü¢ (Low)</td>
                    <td style="padding: 12px; border: 1px solid #dee2e6;">High</td>
                </tr>
                <tr style="background: #f8f9fa;">
                    <td style="padding: 12px; border: 1px solid #dee2e6;"><strong>MMP</strong></td>
                    <td style="padding: 12px; border: 1px solid #dee2e6;">Proportionality + Local Reps</td>
                    <td style="padding: 12px; border: 1px solid #dee2e6;">0.5 - 3.0 üü¢ (Lowest)</td>
                    <td style="padding: 12px; border: 1px solid #dee2e6;">Very High</td>
                </tr>
                <tr>
                    <td style="padding: 12px; border: 1px solid #dee2e6;"><strong>Parallel</strong></td>
                    <td style="padding: 12px; border: 1px solid #dee2e6;">Hybrid: Local + PR</td>
                    <td style="padding: 12px; border: 1px solid #dee2e6;">6.0 - 14.0 üü† (Medium)</td>
                    <td style="padding: 12px; border: 1px solid #dee2e6;">High</td>
                </tr>
            </tbody>
        </table>
        
        <p style="margin-top: 15px; font-size: 0.9em; color: #666;">
            <strong>Note:</strong> The Gallagher Index measures disproportionality (lower is more proportional). 
            These ranges are based on real-world elections using each system.
        </p>
    </div>

    <!-- How This App is Implemented Section -->
    <div class="table-section" id="implementation" style="margin-top: 50px; border-top: 3px solid #667eea; padding-top: 40px;">
        <h2>üíª How This App is Implemented</h2>
        <p style="line-height: 1.6; font-size: 1.05em;">
            This electoral systems simulator is built as a research-grade tool using vanilla JavaScript, 
            designed to provide accurate, deterministic results for academic and educational use. 
            Here's how the technical architecture enables cross-system comparisons and maintains precision.
        </p>
        
        <div class="info-box" style="background: #e8f5e9; border-left: 4px solid #4caf50; margin-top: 20px;">
            <strong>üéØ Design Philosophy:</strong> No random number generation. No synthetic shortcuts. 
            Every calculation follows the exact procedures used in real-world elections, ensuring that 
            the same input always produces the same output‚Äîcritical for research validity.
        </div>

        <!-- Subsection 1: Architecture Overview -->
        <h3 style="margin-top: 30px; color: #667eea;">üìê Architecture Overview</h3>
        
        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
            <h4 style="margin: 0 0 15px 0; color: #333;">Core Components</h4>
            <ul style="line-height: 2; margin-left: 20px;">
                <li><strong>app.js</strong> - Main application logic, UI management, and electoral system calculations</li>
                <li><strong>calculations.js</strong> - Shared mathematical functions (Droop Quota, disproportionality indices)</li>
                <li><strong>round-by-round.js</strong> - Visualization for ranked-choice elimination rounds</li>
                <li><strong>chartjs-wrapper.js</strong> - Chart rendering using Chart.js library</li>
                <li><strong>Backend (Python)</strong> - Advanced calculations for strategic voting and multi-district scenarios</li>
            </ul>
        </div>

        <!-- Subsection 2: Comparing Across Systems -->
        <h3 style="margin-top: 40px; color: #667eea;">üîÑ Comparing Across Systems: The Data Translation Challenge</h3>

        <p style="line-height: 1.6;">
            One of the most powerful features of this simulator is the ability to ask: 
            <em>"What if we ran the exact same election under a different system?"</em> 
            But this creates a technical challenge: how do you translate ranked ballots (used in STV/IRV) 
            into party-list votes (used in MMP/Party-List), or vice versa?
        </p>

        <div class="warning-box" style="margin: 20px 0;">
            <strong>‚ö†Ô∏è The Core Challenge:</strong> Different electoral systems use fundamentally different data structures. 
            STV uses ranked preferences with vote transfers, while MMP uses simple party totals. 
            Direct comparison requires careful data transformation to preserve the essence of voter intent.
        </div>

        <!-- STV to MMP/Party-List Subsection -->
        <h4 style="margin-top: 30px; color: #5568d3;">Comparing STV to MMP and Party-List</h4>

        <p style="line-height: 1.6;">
            This is the most complex comparison because STV's unique characteristics 
            (ranked voting, vote transfers, exhausted ballots) must be translated into 
            simple party totals for MMP/Party-List calculations.
        </p>

        <div style="background: #fff; border: 2px solid #667eea; border-radius: 8px; padding: 25px; margin: 25px 0;">
            <h5 style="margin: 0 0 15px 0; color: #667eea;">The Problem: Loss of Nuance</h5>
            
            <p style="margin-bottom: 20px; line-height: 1.6;">
                If we simply extract first preferences from STV ballots, we lose what makes STV unique: 
                the vote transfers and exhausted ballots. This would make the comparison meaningless 
                because both systems would be working from identical input data.
            </p>
            
            <!-- Flowchart: Current Flow (Problematic) -->
            <div style="background: #fef3c7; border-left: 4px solid #f59e0b; padding: 20px; margin: 20px 0; border-radius: 4px;">
                <h6 style="margin: 0 0 10px 0; color: #d97706;">‚ùå Naive Approach (Shows Zero Difference)</h6>
                <pre style="background: #fff; padding: 15px; border-radius: 4px; overflow-x: auto; font-size: 0.9em;"><code>STV Ranked Ballots
    ‚Üì
Extract First Preferences Only
    ‚Üì
Flat Party Vote Totals: Party A 40%, Party B 35%, Party C 25%
    ‚Üì
MMP Calculation (using same totals)
    ‚Üì
Result: IDENTICAL seat counts ‚Üí 0 difference!</code></pre>
                <p style="margin: 10px 0 0 0; font-size: 0.95em; color: #92400e;">
                    <strong>Problem:</strong> The ranked transfers that make STV unique are stripped away 
                    before the comparison even begins, making both systems mathematically identical.
                </p>
            </div>
            
            <!-- Flowchart: Correct Flow -->
            <div style="background: #d1fae5; border-left: 4px solid #10b981; padding: 20px; margin: 20px 0; border-radius: 4px;">
                <h6 style="margin: 0 0 10px 0; color: #047857;">‚úÖ Our Implementation (Shows Real Difference)</h6>
                <pre style="background: #fff; padding: 15px; border-radius: 4px; overflow-x: auto; font-size: 0.9em;"><code>STV Ranked Ballots
    ‚Üì
[Branch 1: For STV Calculation]
    ‚Üí Run full STV algorithm with transfers
    ‚Üí Track final round tallies: Party A 38%, Party B 36%, Party C 26%
    ‚Üí Track exhausted ballots: 5% lost
    ‚Üí Calculate disproportionality from FINAL tallies
    ‚Üì
[Branch 2: For MMP Comparison]
    ‚Üí Extract first preferences: Party A 40%, Party B 35%, Party C 25%
    ‚Üí Adjust for exhausted votes (reduce effective turnout)
    ‚Üí Run MMP calculation
    ‚Üì
Comparison: Shows REAL difference based on final round vs first choice!</code></pre>
                <p style="margin: 10px 0 0 0; font-size: 0.95em; color: #065f46;">
                    <strong>Solution:</strong> STV uses final round tallies for its metrics, while MMP uses 
                    first preferences. This captures the actual effect of vote transfers and ballot exhaustion.
                </p>
            </div>
        </div>

        <h5 style="margin-top: 25px; color: #5568d3;">Technical Implementation Details</h5>

        <div style="background: #f0f4ff; padding: 20px; border-radius: 8px; margin: 20px 0;">
            <h6 style="margin: 0 0 10px 0; color: #4338ca;">Key Functions</h6>
            
            <dl style="line-height: 1.8; margin-top: 15px;">
                <dt style="font-family: 'Courier New', monospace; background: #fff; padding: 8px; border-radius: 4px; display: inline-block; margin-top: 10px;">
                    <strong>translateSTVtoPartyVotes(ballots, candidates)</strong>
                </dt>
                <dd style="margin: 8px 0 0 20px; line-height: 1.6;">
                    Extracts first preferences from ranked ballots to create party vote totals for MMP/Party-List. 
                    Also tracks exhausted ballots (empty preferences).
                </dd>
                
                <dt style="font-family: 'Courier New', monospace; background: #fff; padding: 8px; border-radius: 4px; display: inline-block; margin-top: 15px;">
                    <strong>calculateShadowResult(currentSystem, compareToSystem, votes)</strong>
                </dt>
                <dd style="margin: 8px 0 0 20px; line-height: 1.6;">
                    Main comparison orchestrator. Handles data translation between systems, including:
                    <ul style="margin-top: 8px;">
                        <li>STV ‚Üí MMP/Party-List: Uses first preferences but adjusts for exhausted ballots</li>
                        <li>MMP ‚Üí Party-List: Isolates list tier only</li>
                        <li>FPTP ‚Üî IRV: Synthesizes ranked ballots or extracts first choices</li>
                    </ul>
                </dd>
                
                <dt style="font-family: 'Courier New', monospace; background: #fff; padding: 8px; border-radius: 4px; display: inline-block; margin-top: 15px;">
                    <strong>calculateLoosemoreHanby(voteShares, seatShares)</strong>
                </dt>
                <dd style="margin: 8px 0 0 20px; line-height: 1.6;">
                    Calculates disproportionality index. For STV, vote shares come from the <strong>final round tallies</strong> 
                    (after all transfers), not first preferences. This is critical for accurate comparisons.
                </dd>
            </dl>
        </div>

        <div class="info-box" style="background: #fff3cd; border-left: 4px solid #ffc107; margin: 20px 0;">
            <strong>üîç Why This Creates a Meaningful Difference:</strong>
            <p style="margin: 10px 0 0 0; line-height: 1.6;">
                In STV, if 5% of ballots are exhausted (all preferences eliminated), those voters 
                effectively "lose their voice" in the final result. In MMP/Party-List, those same voters 
                would have their first-choice vote count toward their party. This difference‚Äîcombined with 
                the effect of vote transfers‚Äîcreates distinct seat allocations and disproportionality metrics.
            </p>
        </div>

        <!-- Other Cross-System Comparisons -->
        <h4 style="margin-top: 30px; color: #5568d3;">Other Cross-System Comparisons</h4>

        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="background: #667eea; color: white;">
                        <th style="padding: 12px; text-align: left;">Comparison</th>
                        <th style="padding: 12px; text-align: left;">Translation Method</th>
                        <th style="padding: 12px; text-align: left;">Key Challenge</th>
                    </tr>
                </thead>
                <tbody>
                    <tr style="background: white;">
                        <td style="padding: 12px; border: 1px solid #dee2e6;"><strong>FPTP ‚Üí IRV</strong></td>
                        <td style="padding: 12px; border: 1px solid #dee2e6;">Create synthetic ballots where each voter ranks only their chosen candidate</td>
                        <td style="padding: 12px; border: 1px solid #dee2e6;">Assumes voters wouldn't rank other candidates if given the option</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #dee2e6;"><strong>IRV ‚Üí FPTP</strong></td>
                        <td style="padding: 12px; border: 1px solid #dee2e6;">Extract first preferences from ranked ballots</td>
                        <td style="padding: 12px; border: 1px solid #dee2e6;">Discards voter's ranking information</td>
                    </tr>
                    <tr style="background: white;">
                        <td style="padding: 12px; border: 1px solid #dee2e6;"><strong>MMP ‚Üî Party-List</strong></td>
                        <td style="padding: 12px; border: 1px solid #dee2e6;">Isolate list tier votes for Party-List; simulate districts for MMP</td>
                        <td style="padding: 12px; border: 1px solid #dee2e6;">District seat allocation affects MMP but not Party-List</td>
                    </tr>
                    <tr>
                        <td style="padding: 12px; border: 1px solid #dee2e6;"><strong>MMP ‚Üî Parallel</strong></td>
                        <td style="padding: 12px; border: 1px solid #dee2e6;">Use same district winners for both</td>
                        <td style="padding: 12px; border: 1px solid #dee2e6;">MMP compensates for district wins; Parallel doesn't</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Precision in STV Section -->
        <h3 style="margin-top: 40px; color: #667eea;">üéØ Precision in STV: The Integer Scaling Approach</h3>

        <p style="line-height: 1.6;">
            STV calculations involve fractional vote transfers (e.g., a ballot might be worth 0.37128 votes after 
            being partially transferred). JavaScript's floating-point arithmetic can introduce tiny rounding errors 
            that accumulate over multiple rounds, potentially changing election outcomes.
        </p>

        <div style="background: #fff; border: 2px solid #667eea; border-radius: 8px; padding: 25px; margin: 25px 0;">
            <h4 style="margin: 0 0 15px 0; color: #667eea;">Our Solution: Integer Scaling</h4>
            
            <p style="line-height: 1.6; margin-bottom: 15px;">
                Instead of working with decimal values, we multiply all vote counts by 100,000 (the SCALE_FACTOR) 
                at the start of the STV calculation. This converts fractional votes into large integers, which 
                JavaScript can handle with perfect precision.
            </p>
            
            <div style="background: #f0f4ff; padding: 15px; border-radius: 4px; margin: 15px 0;">
                <code style="font-size: 0.95em; line-height: 1.8;">
                    <strong>Example:</strong><br>
                    Without scaling: 0.37128 votes (prone to rounding errors)<br>
                    With scaling: 37,128 integer units (perfectly precise)
                </code>
            </div>
            
            <p style="line-height: 1.6; margin-top: 15px;">
                All arithmetic (transfers, eliminations, quota calculations) happens with these scaled integers. 
                Only at the very end do we divide by 100,000 to present human-readable results. This ensures 
                that vote conservation is maintained‚Äîno votes are lost to rounding errors.
            </p>
            
            <div class="info-box" style="background: #e8f5e9; border-left: 4px solid #4caf50; margin-top: 15px;">
                <strong>‚úÖ Result:</strong> Deterministic, reproducible calculations that match real-world 
                election procedures. The same input always produces the same output, down to the exact vote count.
            </div>
        </div>

        <!-- Chart Rendering Section -->
        <h3 style="margin-top: 40px; color: #667eea;">üìä Chart Rendering and Visualization</h3>

        <p style="line-height: 1.6;">
            Results are visualized using <strong>Chart.js</strong>, a flexible JavaScript charting library. 
            The simulator generates:
        </p>

        <ul style="line-height: 2; margin-left: 30px;">
            <li><strong>Pie Charts</strong> - For seat distribution in proportional systems</li>
            <li><strong>Bar Charts</strong> - For comparing vote shares vs. seat shares</li>
            <li><strong>Round-by-Round Tables</strong> - For IRV/STV elimination visualization</li>
            <li><strong>Comparison Tables</strong> - For counterfactual analysis across systems</li>
        </ul>

        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
            <h4 style="margin: 0 0 15px 0;">Dynamic Data Generation</h4>
            <p style="line-height: 1.6;">
                Chart data is generated dynamically from election results. For STV specifically:
            </p>
            <ul style="line-height: 1.8; margin: 10px 0 0 20px;">
                <li>Candidates are grouped by party for the pie chart</li>
                <li>Legend labels include both percentage and seat count</li>
                <li>A separate "Party Seat Distribution" section shows aggregate party results</li>
                <li>The elected candidates list is collapsible (collapsed by default) to focus attention on party-level summaries</li>
            </ul>
        </div>

        <div class="warning-box" style="margin: 20px 0;">
            <strong>üé® Accessibility Note:</strong> All charts use distinct colors with sufficient contrast, 
            and results are also presented in tabular format for screen readers and users with color vision deficiency.
        </div>

        <!-- Open Source Section -->
        <div style="background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%); border: 2px solid #667eea; border-radius: 12px; padding: 30px; margin: 40px 0;">
            <h3 style="margin: 0 0 15px 0; color: #667eea;">üìÇ Open Source & Research Use</h3>
            <p style="line-height: 1.6; font-size: 1.05em;">
                This electoral systems simulator is designed for educational and research purposes. 
                All calculations follow documented real-world procedures, and the code is structured 
                to be readable and verifiable by political scientists and educators.
            </p>
            <p style="line-height: 1.6; margin-top: 15px;">
                <strong>For Researchers:</strong> The deterministic nature of all calculations means you can 
                use this tool to generate reproducible results for academic papers, teaching materials, or 
                policy analysis. If you use this simulator in your research, please cite the specific 
                algorithms and methods described in this documentation.
            </p>
            <div style="margin-top: 20px; text-align: center;">
                <a href="https://github.com/GaryHostt/electoral-systems" target="_blank" 
                   style="display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                          color: white; padding: 15px 30px; text-decoration: none; border-radius: 8px; 
                          font-weight: 600; font-size: 1.1em; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);">
                    üîó View on GitHub
                </a>
            </div>
        </div>

        <!-- Aggregate vs Independent Districts Section -->
        <h3 style="margin-top: 40px; color: #667eea;">‚öôÔ∏è Implementation Note: Aggregate vs. Independent Districts</h3>

        <div class="warning-box" style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 20px; margin: 20px 0; border-radius: 8px;">
            <h4 style="margin: 0 0 10px 0; color: #856404;">The Challenge</h4>
            <p style="line-height: 1.6; margin: 0; color: #856404;">
                To maintain a fast, browser-based experience without requiring users to manually enter data for 
                hundreds of individual constituencies (like the 299 in Germany or 650 in the UK), this simulator 
                uses an <strong>Aggregate Candidate Model</strong> for mixed electoral systems (MMP and MMM).
            </p>
        </div>

        <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
            <h4 style="margin: 0 0 15px 0; color: #333;">How It Works</h4>
            <p style="line-height: 1.6; margin-bottom: 15px;">
                Rather than processing independent geographic districts, the engine takes the total nationwide 
                "Candidate Votes" and partitions them into the required number of seats:
            </p>
            <ol style="line-height: 2; margin-left: 30px;">
                <li><strong>Partitioning:</strong> Total votes for each candidate are divided by the number of 
                districts (e.g., 1,000,000 candidate votes √∑ 100 districts = 10,000 votes per district)</li>
                <li><strong>Stochastic Variance:</strong> To prevent unrealistic "clean sweeps" where a party 
                with 51% wins every seat, the code applies random variance (¬±20%) to each district's vote count</li>
                <li><strong>Local Winner Selection:</strong> For each district, the varied totals are compared 
                and the party with the highest count wins that seat</li>
                <li><strong>Aggregation:</strong> These simulated wins are summed to create district seat counts, 
                which serve as the base for MMP top-ups or MMM additions</li>
            </ol>
        </div>

        <div style="background: #fff8e1; padding: 20px; border-radius: 8px; margin: 20px 0; border: 2px solid #ffa000;">
            <h4 style="margin: 0 0 15px 0; color: #f57c00;">‚ö†Ô∏è Simulation Limits</h4>
            <p style="line-height: 1.6; margin-bottom: 15px;">
                Using aggregate totals instead of discrete geographic districts alters the simulation in several key ways:
            </p>
            <ul style="line-height: 2; margin-left: 30px;">
                <li><strong>Erasure of Geographic Strongholds:</strong> Regional parties like the SNP (Scotland) 
                or CSU (Bavaria) win districts because their supporters are geographically concentrated. The aggregate 
                model spreads votes nationally, making regional parties appear weaker than in reality</li>
                <li><strong>Uniform Competition:</strong> The variance model assumes every district is a "swing seat." 
                In reality, most districts are "safe seats" with immovable leads. This overestimates small party competitiveness</li>
                <li><strong>No Split-Ticket Voting:</strong> Real mixed systems allow voters to pick a local candidate 
                from Party A and a party list from Party B. The aggregate model cannot simulate this behavior</li>
                <li><strong>Underestimation of Overhang Seats:</strong> MMP overhang seats occur when a party is 
                regionally efficient. The aggregate model may show fewer overhang seats than geographic reality would produce</li>
            </ul>
        </div>

        <div class="info-box" style="background: #e8f5e9; border-left: 4px solid #4caf50; margin: 20px 0; padding: 15px;">
            <strong>üöÄ Future Scalability:</strong> For users seeking high-fidelity research, a 
            <strong>"Discrete District"</strong> module is planned which will allow import of individual 
            constituency datasets via CSV to capture true geographic variance.
        </div>
    </div>

        <!-- Modeling Majoritarian Shadows Section -->
        <div class="table-section" id="shadow-comparison" style="margin-top: 50px; border-top: 3px solid #667eea; padding-top: 40px;">
            <h2>üîÑ Modeling Majoritarian Shadows: Proportional to FPTP</h2>
            <p style="line-height: 1.6; font-size: 1.05em;">
                The implementation in the Canvas enables a <strong>"Shadow Comparison"</strong> that projects how proportional results 
                (MMP, MMM, or Party-List) would translate into a First-Past-The-Post (FPTP) environment. While mathematically 
                straightforward, this translation faces significant theoretical hurdles.
            </p>

            <h3 style="margin-top: 30px; color: #667eea;">1. The Code Implementation</h3>
            <p style="line-height: 1.6;">
                The logic relies on the <code style="background: #f0f4ff; padding: 4px 8px; border-radius: 4px; font-family: 'Courier New', monospace;">simulateDistricts</code> 
                function to bridge the gap between aggregate data and geographic outcomes.
            </p>

            <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
                <h4 style="margin: 0 0 15px 0; color: #333;">For MMP/MMM</h4>
                <p style="line-height: 1.6; margin: 0;">
                    The system uses existing <strong>"Candidate Votes"</strong> (the Erststimme or personal vote). This provides a more 
                    accurate geographic proxy than party votes, as it reflects local candidate popularity.
                </p>
            </div>

            <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0;">
                <h4 style="margin: 0 0 15px 0; color: #333;">For Party-List</h4>
                <p style="line-height: 1.6; margin: 0;">
                    Since no candidate data exists, the code generates synthetic candidate shares by distributing national party votes 
                    across a number of districts equal to the total seats.
                </p>
            </div>

            <div style="background: #fff; border: 2px solid #667eea; border-radius: 8px; padding: 25px; margin: 25px 0;">
                <h4 style="margin: 0 0 15px 0; color: #667eea;">Deterministic Variance</h4>
                <p style="line-height: 1.6; margin-bottom: 15px;">
                    To avoid a perfectly flat distribution (which would simply award every seat to the national plurality winner), a 
                    deterministic variance of <strong>0.8x to 1.2x</strong> is applied via a sine-wave seed. This simulates the "swing" 
                    of marginal seats and the "safety" of others, ensuring the simulation is stable across renders.
                </p>
                <div style="background: #f0f4ff; padding: 15px; border-radius: 4px; margin: 15px 0;">
                    <code style="font-size: 0.95em; line-height: 1.8;">
                        <strong>Example:</strong><br>
                        Without variance: Party A with 51% national vote ‚Üí wins 100% of districts<br>
                        With variance: Party A with 51% national vote ‚Üí wins ~60-70% of districts (realistic swing)
                    </code>
                </div>
            </div>

            <h3 style="margin-top: 40px; color: #667eea;">2. Why This is Difficult</h3>
            <p style="line-height: 1.6;">
                Simulating majoritarian outcomes using proportional data is a <strong>"lossy"</strong> conversion due to several factors:
            </p>

            <div style="background: #fff8e1; border-left: 4px solid #ffa000; padding: 20px; margin: 20px 0; border-radius: 8px;">
                <h4 style="margin: 0 0 10px 0; color: #f57c00;">A. Sincere vs. Tactical Voting</h4>
                <p style="line-height: 1.6; margin: 0; color: #856404;">
                    In proportional systems, voters are incentivized to vote sincerely because every vote contributes to the seat count. 
                    In FPTP, voters often vote tactically to avoid "wasting" a vote on a third party. The data used in our simulation 
                    (sincere PR votes) does not account for the consolidation that would occur if those same voters were faced with a 
                    winner-take-all ballot.
                </p>
            </div>

            <div style="background: #fff8e1; border-left: 4px solid #ffa000; padding: 20px; margin: 20px 0; border-radius: 8px;">
                <h4 style="margin: 0 0 10px 0; color: #f57c00;">B. Geographic Sorting (The "Urban Packing" Problem)</h4>
                <p style="line-height: 1.6; margin: 0; color: #856404;">
                    Proportional data often masks geographic concentration. A party might have 20% support nationally, but if that 20% is 
                    spread evenly, they win 0 seats in FPTP. If it is concentrated in one region, they might sweep it. Our variance model 
                    (0.8x-1.2x) is a mathematical abstraction; it cannot predict historical regionalisms like the "Solid South" in the US or 
                    the Bloc Qu√©b√©cois in Canada.
                </p>
            </div>

            <div style="background: #fff8e1; border-left: 4px solid #ffa000; padding: 20px; margin: 20px 0; border-radius: 8px;">
                <h4 style="margin: 0 0 10px 0; color: #f57c00;">C. The Sensitivity of the "Spoiler Effect"</h4>
                <p style="line-height: 1.6; margin: 0; color: #856404;">
                    In a 3-way or 4-way race, FPTP results are extremely sensitive to minor shifts. A 1% shift from Party A to Party B 
                    doesn't just change the seat share (as in PR); it can flip a massive block of districts. This makes the simulation's 
                    reliance on a variance seed a significant variable‚Äîdifferent "seeds" could result in wildly different legislative 
                    majorities even with identical national vote totals.
                </p>
            </div>

            <div style="background: #fff8e1; border-left: 4px solid #ffa000; padding: 20px; margin: 20px 0; border-radius: 8px;">
                <h4 style="margin: 0 0 10px 0; color: #f57c00;">D. Systemic Feedback Loops</h4>
                <p style="line-height: 1.6; margin: 0; color: #856404;">
                    The existence of an FPTP system changes party behavior, candidate recruitment, and platform positioning. We are 
                    essentially simulating a "counterfactual world" using data generated by a different set of political incentives, which 
                    remains the primary challenge for any electoral simulator.
                </p>
            </div>

            <div class="info-box" style="background: #e8f5e9; border-left: 4px solid #4caf50; margin: 20px 0; padding: 15px;">
                <strong>üí° Interpretation Guide:</strong> Shadow comparisons are best used as <strong>illustrative tools</strong> rather than 
                precise predictions. They show the general direction of disproportionality (e.g., "MMP would be more proportional than FPTP") 
                but cannot account for the behavioral changes that would occur if voters and parties adapted to a different system.
            </div>
        </div>

            </main>

            <nav class="table-of-contents">
                <h3>Contents</h3>
                <ul>
                    <li><a href="#video-series">üì∫ Video Series</a></li>
                    <li><a href="#systems-table">üåç Electoral Systems</a></li>
                    <li><a href="#measuring-fairness">üìä Measuring Fairness</a></li>
                    <li><a href="#foundations">üèõÔ∏è Comparative Politics</a></li>
                    <li><a href="#paradoxes">‚öñÔ∏è Social Choice Theory</a></li>
                    <li><a href="#regional-patterns">üåç Regional Patterns</a></li>
                    <li><a href="#glossary">üìñ Glossary</a></li>
                    <li><a href="#quick-comparison">üîç Quick Comparison</a></li>
                    <li><a href="#implementation">üíª Implementation</a></li>
                    <li><a href="#shadow-comparison">üîÑ Shadow Comparisons</a></li>
                </ul>
            </nav>
        </div>

</body>
</html>

